import java.io.PrintStream;
import java.io.DataInputStream;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.IOException;
import java.io.PrintWriter;
import java.io.BufferedWriter;
import java.io.OutputStreamWriter;
import java.net.Socket;
import java.io.DataOutputStream;

class ClientThreads extends Thread
{
	private Socket conn;
	private PrintStream out = null;
	private BufferedReader clientIn; 
		
		
	ClientThreads(Socket conn)
	{
		this.conn = conn;
	}
	
	public void run() 
    {
		try
        {
            out = new PrintStream(conn.getOutputStream());
			
			clientIn = new BufferedReader(new InputStreamReader(conn.getInputStream()));

            out.println("start");
			
			try
			{
				MalwareServer.setup();
				if(Thread.currentThread().isInterrupted()) 
				{
					System.out.println("Client Thread interrupted\n Exiting...");   
				}
			}
			catch(Exception e)
			{
				System.err.println("Cannot start setup");
			}
		}
		catch (IOException e)
        {
            System.out.println("IOException on socket : " + e);
            e.printStackTrace();
        }
		
		try
        {
            conn.close();
        }
        catch(IOException ioException)
        {
            System.err.println("Unable to close. IOexception");
        }
		
		
	}
	
	public static void echo(String msg)
    {
        System.out.println(msg);
    }
}